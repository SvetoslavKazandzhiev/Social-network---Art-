<!DOCTYPE html>
{% load static %}
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>JavaScript for Bulma navbar</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.6.2/css/bulma.min.css">
    <script defer src="https://use.fontawesome.com/releases/v5.0.4/js/all.js"></script>
</head>
<body>

<nav class="navbar is-transparent">
    <div class="navbar-brand">
        <a class="navbar-item" href="https://bulma.io">
            <img src="{% static  'img/logo.png' %}" alt="Bulma: a modern CSS framework based on Flexbox" width="28"
                 height="28">
        </a>
        <div class="navbar-burger burger" data-target="navbarExampleTransparentExample">
            <span></span>
            <span></span>
            <span></span>
        </div>
    </div>

    <div id="navbarExampleTransparentExample" class="navbar-menu">
        <div class="navbar-start">

            <a class="navbar-item" href="{% url 'landing' %}">
                <div class="btn-group dropleft">
                    <div class="d-flex notifications-icon-container rounded-circle align-items-center mr-3"
                         id="id_chat_notification_dropdown_toggle" data-toggle="dropdown">
                        <span id="id_chat_notifications_count" class="notify-badge"></span>
                        <span class="d-flex material-icons notifications-material-icon m-auto align-items-center">home</span>
                        <div class="dropdown-menu scrollable-menu"
                             aria-labelledby="id_chat_notification_dropdown_toggle"
                             id="id_chat_notifications_container">
                        </div>
                    </div>
                </div>
            </a>

            <a class="navbar-item" href="{% url 'inbox' %}">
                <div class="btn-group dropleft">
                    <div class="d-flex notifications-icon-container rounded-circle align-items-center mr-3"
                         id="id_chat_notification_dropdown_toggle" data-toggle="dropdown">
                        <span id="id_chat_notifications_count" class="notify-badge"></span>
                        <span class="d-flex material-icons notifications-material-icon m-auto align-items-center">chat</span>
                        <div class="dropdown-menu scrollable-menu"
                             aria-labelledby="id_chat_notification_dropdown_toggle"
                             id="id_chat_notifications_container">
                        </div>
                    </div>
                </div>
            </a>
             <a class="navbar-item" href="{% url 'newstory' %}">
                <div class="btn-group dropleft">
                    <div class="d-flex notifications-icon-container rounded-circle align-items-center mr-3"
                         id="id_chat_notification_dropdown_toggle" data-toggle="dropdown">
                        <span id="id_chat_notifications_count" class="notify-badge"></span>
                        <span class="d-flex material-icons notifications-material-icon m-auto align-items-center">videocam</span>
                        <div class="dropdown-menu scrollable-menu"
                             aria-labelledby="id_chat_notification_dropdown_toggle"
                             id="id_chat_notifications_container">
                        </div>
                    </div>
                </div>
            </a>

            <a class="navbar-item" href="{% url 'usersearch' %}">
                <div class="btn-group dropleft">
                    <div class="d-flex notifications-icon-container rounded-circle align-items-center mr-3"
                         id="id_chat_notification_dropdown_toggle" data-toggle="dropdown">
                        <span id="id_chat_notifications_count" class="notify-badge"></span>
                        <span class="d-flex material-icons notifications-material-icon m-auto align-items-center">search</span>
                        <div class="dropdown-menu scrollable-menu"
                             aria-labelledby="id_chat_notification_dropdown_toggle"
                             id="id_chat_notifications_container">
                        </div>
                    </div>
                </div>
            </a>

            <a class="navbar-item" href="{% url 'newpost' %}">
                <div class="btn-group dropleft">
                    <div class="d-flex notifications-icon-container rounded-circle align-items-center mr-3"
                         id="id_chat_notification_dropdown_toggle" data-toggle="dropdown">
                        <span id="id_chat_notifications_count" class="notify-badge"></span>
                        <span class="d-flex material-icons notifications-material-icon m-auto align-items-center">file_upload</span>
                        <div class="dropdown-menu scrollable-menu"
                             aria-labelledby="id_chat_notification_dropdown_toggle"
                             id="id_chat_notifications_container">
                        </div>
                    </div>
                </div>
            </a>

            <a class="navbar-item" href="{% url 'show-notifications' %}">
                <div class="btn-group dropleft">
                    <div class="d-flex notifications-icon-container rounded-circle align-items-center mr-3"
                         id="id_chat_notification_dropdown_toggle" data-toggle="dropdown">
                        <span id="id_chat_notifications_count" class="notify-badge"></span>
                        <span class="d-flex material-icons notifications-material-icon m-auto align-items-center">notifications</span>
                        <div class="dropdown-menu scrollable-menu"
                             aria-labelledby="id_chat_notification_dropdown_toggle"
                             id="id_chat_notifications_container">
                        </div>
                    </div>
                </div>
            </a>
            <div class="navbar-item has-dropdown is-hoverable">
                <a class="navbar-link" href="/documentation/overview/start/">
                    Settings
                </a>
                <div class="navbar-dropdown is-boxed">
                    <a class="navbar-item" href="/documentation/overview/start/">
                        contact us
                    </a>
                    <a class="navbar-item" href="https://bulma.io/documentation/modifiers/syntax/">
                        report issue
                    </a>

                </div>
            </div>
        </div>

        <div class="navbar-end">
            <div class="navbar-item">
                <div class="field is-grouped">
                    <p class="control">
                        {% if request.user.is_authenticated %}
                            {% if request.user.profile.picture %}
                                <a class="nav-link" href="{% url 'profile' request.user %}"><img
                                        class="rounded-circle mr-2"
                                        src="{{ request.user.profile.picture.url }}"
                                        width="30" alt="8"><span
                                        class="align-middle">{{ request.user }}</span></a>
                                <a href="{% url 'logout' %}" class="btn btn-danger">Sign out</a>
                            {% else %}
                                <a class="nav-link" href="{% url 'profile' request.user %}"><img
                                        class="rounded-circle mr-2"
                                        src="{% static 'img/av.png' %}"
                                        width="30" alt="8"><a href="{% url 'logout' %}" class="nav-item nav-link">Sign out</a>
                            {% endif %}
                        {% else %}
                            <a href="{% url 'login' %}" class="nav-item nav-link">Sign in</a>
                            <a href="{% url 'signup' %}" class="nav-item nav-link">Sign up</a>
                        {% endif %}
                        {#            <a class="bd-tw-button button" data-social-network="Twitter" data-social-action="tweet" data-social-target="http://localhost:4000" target="_blank" href="https://twitter.com/intent/tweet?text=Bulma: a modern CSS framework based on Flexbox&amp;hashtags=bulmaio&amp;url=http://localhost:4000&amp;via=jgthms">#}
                        {#              <span class="icon">#}
                        {#                <i class="fab fa-twitter"></i>#}
                        {#              </span>#}
                        {#              <span>#}
                        {#                Tweet#}
                        {#              </span>#}
                        {#            </a>#}
                    </p>
                    {#          <p class="control">#}
                    {#            <a class="button is-primary" href="https://github.com/jgthms/bulma/archive/0.5.1.zip">#}
                    {#              <span class="icon">#}
                    {#                <i class="fas fa-download"></i>#}
                    {#              </span>#}
                    {#              <span>Download</span>#}
                    {#            </a>#}
                    {#          </p>#}
                </div>
            </div>
        </div>
    </div>
</nav>

<script>
    'use strict';

    document.addEventListener('DOMContentLoaded', function () {

        // Dropdowns in navbar

        var $dropdowns = getAll('.navbar-item.has-dropdown:not(.is-hoverable)');

        if ($dropdowns.length > 0) {
            $dropdowns.forEach(function ($el) {
                $el.addEventListener('click', function (event) {
                    event.stopPropagation();
                    $el.classList.toggle('is-active');
                });
            });

            document.addEventListener('click', function (event) {
                closeDropdowns();
            });
        }

        function closeDropdowns() {
            $dropdowns.forEach(function ($el) {
                $el.classList.remove('is-active');
            });
        }

        // Close dropdowns if ESC pressed
        document.addEventListener('keydown', function (event) {
            var e = event || window.event;
            if (e.keyCode === 27) {
                closeDropdowns();
            }
        });

        // Toggles

        var $burgers = getAll('.burger');

        if ($burgers.length > 0) {
            $burgers.forEach(function ($el) {
                $el.addEventListener('click', function () {
                    var target = $el.dataset.target;
                    var $target = document.getElementById(target);
                    $el.classList.toggle('is-active');
                    $target.classList.toggle('is-active');
                });
            });
        }

        // Functions

        function getAll(selector) {
            return Array.prototype.slice.call(document.querySelectorAll(selector), 0);
        }
    });
</script>
</body>
